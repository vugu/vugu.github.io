<!doctype html>
<html>
<head>

<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">

<link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<title>Building and Distribution</title>

<meta charset="utf-8"/>

<meta name="description" content="To make a proper server suitable for staging or production, or to start adding more server-side functionality to, you&#39;ll want to create a server.go file, and place separate web server code in here."/>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="/assets/css/vendor.css" />

<link rel="stylesheet" href="/assets/css/style.css" />

<script src="https://cdn.jsdelivr.net/npm/text-encoding@0.7.0/lib/encoding.min.js"></script> 
<script src="/wasm_exec.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-137242493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-137242493-1');
</script>

</head>
<body>
<div id="root_mount_parent">
<style>
#root .header {
    background: #72ceff
}

#root .header + section {
    padding-top: 0;
}

/* code formatting */
#root pre.chroma {
    border: 4px solid #f1f1f1;
}

#root .chroma .err {
    background-color: transparent;
}

</style><div id="root">



    <!-- header -->
    <header class="header ">
      <div class="container">
        <div class="row">
          <nav class="navbar navbar-expand-lg navbar-light">
            <a href="/" class="navbar-brand"><img src="/assets/images/logo-white.svg" alt="Logo"/></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                  <a href="/" ="&lt;nil&gt;" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                  <a href="/doc/start" ="&lt;nil&gt;" class="nav-link">Getting Started</a>
                </li>
                <li class="nav-item">
                  <a href="/doc" ="&lt;nil&gt;" class="nav-link active">Documentation</a>
                </li>
                <li class="nav-item">
                  <a href="/faq" ="&lt;nil&gt;" class="nav-link">faq</a>
                </li>
                <!--
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="dropdown-1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-1">
                    <a class="dropdown-item" href="html/docs/layout-1.html">Layout 1</a>
                    <a class="dropdown-item" href="html/docs/layout-2.html">Layout 2</a>
                    <a class="dropdown-item" href="html/docs/layout-3.html">Layout 3</a>
                    <a class="dropdown-item" href="html/docs/layout-4.html">Layout 4</a>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="dropdown-2" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Help Center
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-2">
                    <a class="dropdown-item" href="html/help/homepage-1.html">Homepage 1</a>
                    <a class="dropdown-item" href="html/help/homepage-2.html">Homepage 2</a>
                    <a class="dropdown-item" href="html/help/homepage-3.html">Homepage 3</a>
                    <a class="dropdown-item" href="html/help/category.html">Category</a>
                    <a class="dropdown-item" href="html/help/category-inner.html">Category Inner</a>
                    <a class="dropdown-item" href="html/help/article-1.html">Article 1</a>
                    <a class="dropdown-item" href="html/help/article-2.html">Article 2</a>
                    <a class="dropdown-item" href="html/help/tutorial.html">Tutorial</a>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="dropdown-3" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Pages
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-3">
                    <a class="dropdown-item" href="html/pages/contact.html">Contact</a>
                    <a class="dropdown-item" href="html/pages/changelog.html">Changelog</a>
                    <a class="dropdown-item" href="html/pages/faq.html">FAQ</a>
                    <a class="dropdown-item" href="html/pages/pricing.html">Pricing</a>
                    <a class="dropdown-item" href="html/pages/terms.html">Terms</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="html/pages/404.html">404</a>
                  </div>
                </li>
                -->
              </ul>
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="https://github.com/vugu/vugu" target="_blank">GitHub</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="https://godoc.org/github.com/vugu/vugu" target="_blank">GoDoc</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="https://play.vugu.org/" target="_blank">Playground</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- / header -->

    
    <section class="site-doc">


    <!-- hero -->
    <section class="hero bg-blue">
      <div class="container">
        <div class="row">
          <div class="col-md-8 text-white mb-3">
            <h1 class="h2 pb-1 pt-2">Building and Distribution</h1>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb breadcrumb-minimal">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/doc">Doc</a></li>
                <li class="breadcrumb-item active">Building and Distribution</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </section>
    <!-- / hero -->


    <!-- sidebar layout -->
    <section class="">
      <div class="container overlay-item-top">
        <div class="row">
          <div class="col">
            <div class="content boxed">
              <div class="row separated">

                <!-- content -->

                

                

                

                

                

                

                

                
                
                

                <!--
                <article class="col-md-8 content-body" vg-if='allPages.FindByPathOrEmpty(data.Router.Path()).Path=="/doc/components-in-depth"'>
                  components in depth

                  mention generated BuildVDOM and that you can look at a generated .go file to see, but it's done automatically
                  variables available - comp, data, event 

                  explain for loops and bound attributes and how these end up in go code 

                  NewData method  and in which cases it's called

                  Comp struct, only one instance for the whole app, corresponds to the component type, can have config here if needed for complex cases, but often this is just empty
                  
                  show component written manually in Go, with all it's parts - comments to show what is auto generated and 
                  what would normally be copied from the vugu file

                </article>
                -->

                <article class="col-md-8 content-body">

                    <!-- <p>Building and Distribution</p> -->

                    <p>The development setup described in 
                      <a href="/doc/start">Getting Started</a>
                      is a great way to get going with Vugu. But 
                      when you&#39;re ready to move your application to a staging or production environment (or you need
                      to do development work on the Go server part of your web application), additional steps 
                      are in order.
                    </p>

                    <h2>Adding a Server</h2>

                    <p>The server you created on the Getting Started page is only a single file, it does not
                      compile as part of your application (due to the <code>// +build ignore</code> at the top).
                      The main reason for this is that it makes things simpler when you are just hacking away
                      on your user interface.  If you enter bad code into a .vugu file (which ends up 
                      in a .go file and breaks your build), <code>go run devserver.go</code>
                      will still run.
                    </p>

                    <p>To make a proper server suitable for staging or production, or to start adding more 
                      server-side functionality to, you&#39;ll want to create a server.go file, and place separate 
                      web server code in here.  It is suggested you leave devserver.go where it is and you can 
                      use it if/when needed, it won&#39;t conflict with server.go.
                    </p>

                    <p>Note that server.go looks really similar to devserver.go in the beginning.  But 
                      as you add server-side functionality other things to server.go, the need for it 
                      becomes more apparent.  We also have some additional command line flags that 
                      are useful for an application running on a server.</p>
                    <p>This example includes a <code>-dev</code> flag to 
                    enable automatically performing Vugu code generation and rebuilding your 
                    wasm (same as devserver.go), which you can turn on and off.
                    Running without <code>-dev</code>, this can also serve as a viable production server.
                    (Obviously you need to be aware of your specific production environment requirements,
                    but this will get you pointed in the right direction.)</p>
                    <p>Command line flags for the HTTP listener and the directory to look for files in are 
                    also included. <strong>server.go</strong>:</p>
                    
<div>
<style type="text/css">
/* Background */ .chroma { color: #272822; background-color: #fafafa }
/* Error */ .chroma .err { color: #960050; background-color: #1e0010 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #e1e1e1 }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* Keyword */ .chroma .k { color: #00a8c8 }
/* KeywordConstant */ .chroma .kc { color: #00a8c8 }
/* KeywordDeclaration */ .chroma .kd { color: #00a8c8 }
/* KeywordNamespace */ .chroma .kn { color: #f92672 }
/* KeywordPseudo */ .chroma .kp { color: #00a8c8 }
/* KeywordReserved */ .chroma .kr { color: #00a8c8 }
/* KeywordType */ .chroma .kt { color: #00a8c8 }
/* Name */ .chroma .n { color: #111111 }
/* NameAttribute */ .chroma .na { color: #75af00 }
/* NameBuiltin */ .chroma .nb { color: #111111 }
/* NameBuiltinPseudo */ .chroma .bp { color: #111111 }
/* NameClass */ .chroma .nc { color: #75af00 }
/* NameConstant */ .chroma .no { color: #00a8c8 }
/* NameDecorator */ .chroma .nd { color: #75af00 }
/* NameEntity */ .chroma .ni { color: #111111 }
/* NameException */ .chroma .ne { color: #75af00 }
/* NameFunction */ .chroma .nf { color: #75af00 }
/* NameFunctionMagic */ .chroma .fm { color: #111111 }
/* NameLabel */ .chroma .nl { color: #111111 }
/* NameNamespace */ .chroma .nn { color: #111111 }
/* NameOther */ .chroma .nx { color: #75af00 }
/* NameProperty */ .chroma .py { color: #111111 }
/* NameTag */ .chroma .nt { color: #f92672 }
/* NameVariable */ .chroma .nv { color: #111111 }
/* NameVariableClass */ .chroma .vc { color: #111111 }
/* NameVariableGlobal */ .chroma .vg { color: #111111 }
/* NameVariableInstance */ .chroma .vi { color: #111111 }
/* NameVariableMagic */ .chroma .vm { color: #111111 }
/* Literal */ .chroma .l { color: #ae81ff }
/* LiteralDate */ .chroma .ld { color: #d88200 }
/* LiteralString */ .chroma .s { color: #d88200 }
/* LiteralStringAffix */ .chroma .sa { color: #d88200 }
/* LiteralStringBacktick */ .chroma .sb { color: #d88200 }
/* LiteralStringChar */ .chroma .sc { color: #d88200 }
/* LiteralStringDelimiter */ .chroma .dl { color: #d88200 }
/* LiteralStringDoc */ .chroma .sd { color: #d88200 }
/* LiteralStringDouble */ .chroma .s2 { color: #d88200 }
/* LiteralStringEscape */ .chroma .se { color: #8045ff }
/* LiteralStringHeredoc */ .chroma .sh { color: #d88200 }
/* LiteralStringInterpol */ .chroma .si { color: #d88200 }
/* LiteralStringOther */ .chroma .sx { color: #d88200 }
/* LiteralStringRegex */ .chroma .sr { color: #d88200 }
/* LiteralStringSingle */ .chroma .s1 { color: #d88200 }
/* LiteralStringSymbol */ .chroma .ss { color: #d88200 }
/* LiteralNumber */ .chroma .m { color: #ae81ff }
/* LiteralNumberBin */ .chroma .mb { color: #ae81ff }
/* LiteralNumberFloat */ .chroma .mf { color: #ae81ff }
/* LiteralNumberHex */ .chroma .mh { color: #ae81ff }
/* LiteralNumberInteger */ .chroma .mi { color: #ae81ff }
/* LiteralNumberIntegerLong */ .chroma .il { color: #ae81ff }
/* LiteralNumberOct */ .chroma .mo { color: #ae81ff }
/* Operator */ .chroma .o { color: #f92672 }
/* OperatorWord */ .chroma .ow { color: #f92672 }
/* Punctuation */ .chroma .p { color: #111111 }
/* Comment */ .chroma .c { color: #75715e }
/* CommentHashbang */ .chroma .ch { color: #75715e }
/* CommentMultiline */ .chroma .cm { color: #75715e }
/* CommentSingle */ .chroma .c1 { color: #75715e }
/* CommentSpecial */ .chroma .cs { color: #75715e }
/* CommentPreproc */ .chroma .cp { color: #75715e }
/* CommentPreprocFile */ .chroma .cpf { color: #75715e }
/* GenericEmph */ .chroma .ge { font-style: italic }
/* GenericStrong */ .chroma .gs { font-weight: bold }
nobody { color: #272822; background-color: #fafafa; }
</style>
<pre class="chroma"><span class="c1">// +build !wasm
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">main</span>

<span class="c1">//go:generate vugugen .
</span><span class="c1"></span>
<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;flag&#34;</span>
	<span class="s">&#34;log&#34;</span>
	<span class="s">&#34;net/http&#34;</span>
	<span class="s">&#34;os&#34;</span>
	<span class="s">&#34;path/filepath&#34;</span>

	<span class="s">&#34;github.com/vugu/vugu/simplehttp&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">dev</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="s">&#34;dev&#34;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s">&#34;Enable development features&#34;</span><span class="p">)</span>
	<span class="nx">dir</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;dir&#34;</span><span class="p">,</span> <span class="s">&#34;.&#34;</span><span class="p">,</span> <span class="s">&#34;Project directory&#34;</span><span class="p">)</span>
	<span class="nx">httpl</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;http&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:8877&#34;</span><span class="p">,</span> <span class="s">&#34;Listen for HTTP on this host:port&#34;</span><span class="p">)</span>
	<span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>
	<span class="nx">wd</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">filepath</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="o">*</span><span class="nx">dir</span><span class="p">)</span>
	<span class="nx">os</span><span class="p">.</span><span class="nf">Chdir</span><span class="p">(</span><span class="nx">wd</span><span class="p">)</span>
	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Starting HTTP Server at %q&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">httpl</span><span class="p">)</span>
	<span class="nx">h</span> <span class="o">:=</span> <span class="nx">simplehttp</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">wd</span><span class="p">,</span> <span class="o">*</span><span class="nx">dev</span><span class="p">)</span>
	<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="o">*</span><span class="nx">httpl</span><span class="p">,</span> <span class="nx">h</span><span class="p">))</span>
<span class="p">}</span>
</pre>


</div>

                    <p>
                      To run this server, you can either build the binary and run it directly, or <code>go run . -dev</code>
                      also works.
                    </p>

                    <h2>Making dist.go</h2>

                    <p>
                      Rather than introducing third party build tools, the suggested approach to distributing your 
                      application is to create a small file called dist.go (ignored by the rest of your application)
                      that you run when you want to build your distribution.  The 
                      <a target="_blank" href="https://godoc.org/github.com/vugu/vugu/distutil">distutil</a> package has some 
                      convient functions that make this less tedious than it might seem.  This approach also
                      has the advantage that it works equally well on Windows, Linux and Mac, and without 
                      having to install anything.  The Go module system takes care of that for you.
                    </p>

                    <p>Various steps are possible and there is not a one-size-fits-all dist.go.  That said,
                      here&#39;s one that will get you started:
                    </p>
                    <ul>
                        <li class="pb-2">It creates a <strong>&#34;dist&#34; folder, copies the static files</strong> from your project into it</li>
                        <li class="pb-2">It finds and copies <strong>wasm_exec.js</strong></li>
                        <li class="pb-2">It makes sure <strong>vugugen</strong> is installed</li>
                        <li class="pb-2">It runs <strong>go generate</strong></li>
                        <li class="pb-2">It <strong>builds your main.wasm</strong> file</li>
                        <li>And if desired you can make it <strong>write out an index.html</strong> or build your <strong>server executable</strong></li>
                      </ul>

<div>
<style type="text/css">
/* Background */ .chroma { color: #272822; background-color: #fafafa }
/* Error */ .chroma .err { color: #960050; background-color: #1e0010 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #e1e1e1 }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* Keyword */ .chroma .k { color: #00a8c8 }
/* KeywordConstant */ .chroma .kc { color: #00a8c8 }
/* KeywordDeclaration */ .chroma .kd { color: #00a8c8 }
/* KeywordNamespace */ .chroma .kn { color: #f92672 }
/* KeywordPseudo */ .chroma .kp { color: #00a8c8 }
/* KeywordReserved */ .chroma .kr { color: #00a8c8 }
/* KeywordType */ .chroma .kt { color: #00a8c8 }
/* Name */ .chroma .n { color: #111111 }
/* NameAttribute */ .chroma .na { color: #75af00 }
/* NameBuiltin */ .chroma .nb { color: #111111 }
/* NameBuiltinPseudo */ .chroma .bp { color: #111111 }
/* NameClass */ .chroma .nc { color: #75af00 }
/* NameConstant */ .chroma .no { color: #00a8c8 }
/* NameDecorator */ .chroma .nd { color: #75af00 }
/* NameEntity */ .chroma .ni { color: #111111 }
/* NameException */ .chroma .ne { color: #75af00 }
/* NameFunction */ .chroma .nf { color: #75af00 }
/* NameFunctionMagic */ .chroma .fm { color: #111111 }
/* NameLabel */ .chroma .nl { color: #111111 }
/* NameNamespace */ .chroma .nn { color: #111111 }
/* NameOther */ .chroma .nx { color: #75af00 }
/* NameProperty */ .chroma .py { color: #111111 }
/* NameTag */ .chroma .nt { color: #f92672 }
/* NameVariable */ .chroma .nv { color: #111111 }
/* NameVariableClass */ .chroma .vc { color: #111111 }
/* NameVariableGlobal */ .chroma .vg { color: #111111 }
/* NameVariableInstance */ .chroma .vi { color: #111111 }
/* NameVariableMagic */ .chroma .vm { color: #111111 }
/* Literal */ .chroma .l { color: #ae81ff }
/* LiteralDate */ .chroma .ld { color: #d88200 }
/* LiteralString */ .chroma .s { color: #d88200 }
/* LiteralStringAffix */ .chroma .sa { color: #d88200 }
/* LiteralStringBacktick */ .chroma .sb { color: #d88200 }
/* LiteralStringChar */ .chroma .sc { color: #d88200 }
/* LiteralStringDelimiter */ .chroma .dl { color: #d88200 }
/* LiteralStringDoc */ .chroma .sd { color: #d88200 }
/* LiteralStringDouble */ .chroma .s2 { color: #d88200 }
/* LiteralStringEscape */ .chroma .se { color: #8045ff }
/* LiteralStringHeredoc */ .chroma .sh { color: #d88200 }
/* LiteralStringInterpol */ .chroma .si { color: #d88200 }
/* LiteralStringOther */ .chroma .sx { color: #d88200 }
/* LiteralStringRegex */ .chroma .sr { color: #d88200 }
/* LiteralStringSingle */ .chroma .s1 { color: #d88200 }
/* LiteralStringSymbol */ .chroma .ss { color: #d88200 }
/* LiteralNumber */ .chroma .m { color: #ae81ff }
/* LiteralNumberBin */ .chroma .mb { color: #ae81ff }
/* LiteralNumberFloat */ .chroma .mf { color: #ae81ff }
/* LiteralNumberHex */ .chroma .mh { color: #ae81ff }
/* LiteralNumberInteger */ .chroma .mi { color: #ae81ff }
/* LiteralNumberIntegerLong */ .chroma .il { color: #ae81ff }
/* LiteralNumberOct */ .chroma .mo { color: #ae81ff }
/* Operator */ .chroma .o { color: #f92672 }
/* OperatorWord */ .chroma .ow { color: #f92672 }
/* Punctuation */ .chroma .p { color: #111111 }
/* Comment */ .chroma .c { color: #75715e }
/* CommentHashbang */ .chroma .ch { color: #75715e }
/* CommentMultiline */ .chroma .cm { color: #75715e }
/* CommentSingle */ .chroma .c1 { color: #75715e }
/* CommentSpecial */ .chroma .cs { color: #75715e }
/* CommentPreproc */ .chroma .cp { color: #75715e }
/* CommentPreprocFile */ .chroma .cpf { color: #75715e }
/* GenericEmph */ .chroma .ge { font-style: italic }
/* GenericStrong */ .chroma .gs { font-weight: bold }
nobody { color: #272822; background-color: #fafafa; }
</style>
<pre class="chroma"><span class="c1">// +build ignore
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;flag&#34;</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;log&#34;</span>
	<span class="s">&#34;os&#34;</span>
	<span class="s">&#34;os/exec&#34;</span>
	<span class="s">&#34;path/filepath&#34;</span>
	<span class="s">&#34;time&#34;</span>

	<span class="s">&#34;github.com/vugu/vugu/distutil&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="nx">clean</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="s">&#34;clean&#34;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s">&#34;Remove dist dir before starting&#34;</span><span class="p">)</span>
	<span class="nx">dist</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;dist&#34;</span><span class="p">,</span> <span class="s">&#34;dist&#34;</span><span class="p">,</span> <span class="s">&#34;Directory to put distribution files in&#34;</span><span class="p">)</span>
	<span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>

	<span class="nx">start</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>

	<span class="k">if</span> <span class="o">*</span><span class="nx">clean</span> <span class="p">{</span>
		<span class="nx">os</span><span class="p">.</span><span class="nf">RemoveAll</span><span class="p">(</span><span class="o">*</span><span class="nx">dist</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">os</span><span class="p">.</span><span class="nf">MkdirAll</span><span class="p">(</span><span class="o">*</span><span class="nx">dist</span><span class="p">,</span> <span class="mo">0755</span><span class="p">)</span> <span class="c1">// create dist dir if not there
</span><span class="c1"></span>
	<span class="c1">// copy static files
</span><span class="c1"></span>	<span class="nx">distutil</span><span class="p">.</span><span class="nf">MustCopyDirFiltered</span><span class="p">(</span><span class="s">&#34;.&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">dist</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>

	<span class="c1">// find and copy wasm_exec.js
</span><span class="c1"></span>	<span class="nx">distutil</span><span class="p">.</span><span class="nf">MustCopyFile</span><span class="p">(</span><span class="nx">distutil</span><span class="p">.</span><span class="nf">MustWasmExecJsPath</span><span class="p">(),</span> <span class="nx">filepath</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="o">*</span><span class="nx">dist</span><span class="p">,</span> <span class="s">&#34;wasm_exec.js&#34;</span><span class="p">))</span>

	<span class="c1">// check for vugugen and go get if not there
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">exec</span><span class="p">.</span><span class="nf">LookPath</span><span class="p">(</span><span class="s">&#34;vugugen&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="nx">distutil</span><span class="p">.</span><span class="nf">MustExec</span><span class="p">(</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="s">&#34;get&#34;</span><span class="p">,</span> <span class="s">&#34;github.com/vugu/vugu/cmd/vugugen&#34;</span><span class="p">))</span>
	<span class="p">}</span>

	<span class="c1">// run go generate
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="nx">distutil</span><span class="p">.</span><span class="nf">MustExec</span><span class="p">(</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="s">&#34;generate&#34;</span><span class="p">,</span> <span class="s">&#34;.&#34;</span><span class="p">))</span>

	<span class="c1">// run go build for wasm binary
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="nx">distutil</span><span class="p">.</span><span class="nf">MustEnvExec</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;GOOS=js&#34;</span><span class="p">,</span> <span class="s">&#34;GOARCH=wasm&#34;</span><span class="p">},</span> <span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="s">&#34;build&#34;</span><span class="p">,</span> <span class="s">&#34;-o&#34;</span><span class="p">,</span> <span class="nx">filepath</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="o">*</span><span class="nx">dist</span><span class="p">,</span> <span class="s">&#34;main.wasm&#34;</span><span class="p">),</span> <span class="s">&#34;.&#34;</span><span class="p">))</span>

	<span class="c1">// STATIC INDEX FILE:
</span><span class="c1"></span>	<span class="c1">// if you are hosting with a static file server or CDN, you can write out the default index.html from simplehttp
</span><span class="c1"></span>	<span class="c1">// req, _ := http.NewRequest(&#34;GET&#34;, &#34;/index.html&#34;, nil)
</span><span class="c1"></span>	<span class="c1">// outf, err := os.OpenFile(filepath.Join(*dist, &#34;index.html&#34;), os.O_CREATE|os.O_TRUNC|os.O_WRONLY, 0644)
</span><span class="c1"></span>	<span class="c1">// distutil.Must(err)
</span><span class="c1"></span>	<span class="c1">// defer outf.Close()
</span><span class="c1"></span>	<span class="c1">// template.Must(template.New(&#34;_page_&#34;).Parse(simplehttp.DefaultPageTemplateSource)).Execute(outf, map[string]interface{}{&#34;Request&#34;: req})
</span><span class="c1"></span>
	<span class="c1">// BUILD GO SERVER:
</span><span class="c1"></span>	<span class="c1">// or if you are deploying a Go server (yay!) you can build that binary here
</span><span class="c1"></span>	<span class="c1">// fmt.Print(distutil.MustExec(&#34;go&#34;, &#34;build&#34;, &#34;-o&#34;, filepath.Join(*dist, &#34;server&#34;), &#34;.&#34;))
</span><span class="c1"></span>
	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;dist.go complete in %v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Since</span><span class="p">(</span><span class="nx">start</span><span class="p">))</span>
<span class="p">}</span></pre>


</div>

                    <p>
                      By dropping the above is dist.go and tuning it, you can run <code>go run dist.go</code>
                      and get a <code>dist folder with the distribution of your project</code>, ready for 
                      deployment.  And you can of course easily call this from another build/distribution system, 
                      such as a Dockerfile.
                    </p>
                    
                    <!--
                    .gitignore dist folder

                    server.go should have flag for dev and flag for http listener and flag for main dir, defaulting to "."

                    make sure to include go:generate in server.go

                    <p>need to mention how to set title and meta tags as part of setting up server

                      actually we need to show two approaches here - one with a dev/prod Go server, along with its 
                      build script

                      and then an entirely different setup which outputs static HTML to the dist folder,
                       for use with static file servers, CDNs, etc.

                       bulleted list for each?
                    </p>
                    -->

                </article>
                

                
                <!--
                <article class="col-md-8 content-body">

                  <p>You can change a domain's contact information at any time. Domains have four sets of contacts, which are listed below after the instructions.</p>

                  <div class="alert alert-warning" role="alert">
                    <i class="icon-alert-circle"></i>
                    <h4 class="fs-22">Tip</h4>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos minus, qui error eveniet! Et consequuntur fugit nulla nam</p>
                  </div>

                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id illo eveniet blanditiis aliquam voluptatem quaerat sapiente alias ex pariatur quasi, ipsa dolorem impedit nemo eius, hic est magnam quisquam soluta!</p>


                  <section id="section-1">
                    <h2 class="section-title-2">Quick Start <a data-scroll href="#section-2" class="anchor" data-toggle="tooltip" data-placement="top" title="Copy URL"><i class="icon-hash"></i></a></h2>
                    <ol class="step-list">
                      <li><div>
                        <p>Go to the <a href="" class="external">Domains Settings</a> page.</p>
                      </div></li>
                      <li><div>
                        <p>Under Contact Information, click Edit. (Note: if you don't see the Edit link, you may have Domain Privacy turned on. Click the View personal information link, and then you'll be able to click the Edit link.)</p>
                      </div>
                        <ol>
                          <li><div>
                            <p>To edit All Contacts, enter the Contact, Address, Phone, and Email information you want to update, and then click OK.</p>
                          </div></li>
                          <li><div>
                            <p>To edit each individual contact, clear the Use for all contact types check box and enter the information you want to update.</p>
                          </div></li>
                        </ol>
                      </li>
                      <li><div>
                        <p>Click Save</p>
                      </div></li>
                    </ol>
                  </section>


                  <section id="section-2">
                    <h2 class="section-title-2">Video Preview <a data-scroll href="#section-2" class="anchor" data-toggle="tooltip" data-placement="top" title="Copy URL"><i class="icon-hash"></i></a></h2>
                    <div class="row">
                      <div class="col-12">
                        <video
                          id="video"
                          class="youtube video-js vjs-default-skin video-16-9"
                          controls
                          width="640" height="264"
                          data-setup='{ "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": "https://www.youtube.com/watch?v=DkeiKbqa02g"}], "youtube": { "ytControls": 2 } }'
                        >
                        </video>
                      </div>
                    </div>
                  </section>


                  <section id="section-3">
                    <h2 class="section-title-2">Typography <a data-scroll href="#section-3" class="anchor" data-toggle="tooltip" data-placement="top" title="Copy URL"><i class="icon-hash"></i></a></h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Molestiae debitis dicta, dolorum modi aliquam praesentium, molestias! Quibusdam magni natus eligendi, delectus odit, veritatis dignissimos voluptate dolorum vitae laborum fuga? Facilis.</p>
                    <div class="row gutter-2">
                      <div class="col-8 col-md-5">
                        <div class="type boxed">
                          <div>
                            <span class="badge badge-primary">New</span>
                            <h5 class="type-title">Open Sans</h5>
                            <div class="type-example">
                              <span>Ab</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-8 col-md-5">
                        <div class="type bordered">
                          <div>
                            <h5 class="type-title">Open Sans</h5>
                            <div class="type-example">
                              <span>Ab</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>

                  <section id="section-4">
                    <h2 class="section-title-2">File Tree <a data-scroll href="#section-4" class="anchor" data-toggle="tooltip" data-placement="top" title="Copy URL"><i class="icon-hash"></i></a></h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Suscipit magnam exercitationem fugit doloremque ut, neque nobis fuga voluptatum minima officiis iure consectetur nemo maiores, hic qui rem quae dolor dolorem.</p>
                    <div class="row">
                      <div class="col-md-8">
                        <div class="bordered p-2 p-md-5">
                          <ul class="file-tree">
                            <li class="file-tree-folder empty">Images
                              <span>description</span>
                            </li>
                            <li class="file-tree-folder">CSS
                              <span>description</span>
                              <ul>
                                <li>file name <span>description</span></li>
                                <li>file name <span>description</span></li>
                              </ul>
                            </li>
                            <li class="file-tree-folder">HTML
                              <span>description</span>
                              <ul>
                                <li class="file-tree-folder">PAGES
                                  <span>description</span>
                                  <ul>
                                    <li>file name <span>description</span></li>
                                    <li>file name <span>description</span></li>
                                    <li>file name <span>description</span></li>
                                  </ul>
                                </li>
                                <li>file name <span>description</span></li>
                                <li>file name <span>description</span></li>
                              </ul>
                            </li>
                            <li>index.html <span>description</span></li>
                            <li>components.html <span>description</span></li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </section>

                </article>
                -->


                <!-- / content -->


                <!-- sidebar -->
                <aside class="col-md-4 content-aside bg-light">
                  <div class="widget">
                    <h3 class="widget-title">Documentation</h3>
                    <div class="list-group list-group-related">

                      <a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>What is Vugu?</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/start">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Getting Started</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/files">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Vugu Files</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/files/markup">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Markup (HTML/Go)</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/files/style">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Styles (CSS)</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/files/code">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Code (Go)</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/dom-events">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>DOM Events</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/components">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Using Components</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/program">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Program Structure</span>
                      </a><a class="list-group-item list-group-item-action d-flex align-items-center active" ="&lt;nil&gt;" href="/doc/build-and-dist">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        <span>Building and Distribution</span>
                      </a>

                      <!--
                      <a href="#" class="list-group-item list-group-item-action d-flex align-items-center active">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        Registering Domain Names
                      </a>
                      <a href="#" class="list-group-item list-group-item-action d-flex align-items-center active">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        What's the difference between a domain and a website?
                      </a>
                      <a href="#" class="list-group-item list-group-item-action d-flex align-items-center active">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        What is protected registration ?
                      </a>
                      <a href="#" class="list-group-item list-group-item-action d-flex align-items-center active">
                        <i class="fs-20 icon-file-text2 text-primary mr-1"></i>
                        Transfer domain to another registrar
                      </a>
                      -->
                    </div>
                  </div>

                </aside>
                <!-- / sidebar -->


              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- / sidebar layout -->




    <!-- TODO: this is kinda cool, see if we can hack it in later -->
    <!-- interpost -->
    <section class="bg-dark text-white separator-bottom p-0">
      <div class="container">
        <div class="row gutter-0">
          <div class="col-12 col-md-6">
            <br/>
            <!-- <h4 class="interpost interpost-prev"><a href="">Forwarding your incoming support email to Zendesk using Yahoo</a></h4> -->
          </div>
          <div class="col-12 col-md-6 text-right">
              <!-- interpost-next  - this class was causing some funk, took it out -->
            
          </div>
        </div>
      </div>
    </section>
    <!-- / interpost -->





</section>
    

        <!-- hero 
        <section class="hero pb-0">
                <div class="image image-gradient-vertical" style="background-image:url(../../assets/images/image.jpg)"></div>
                <div class="container">
                  <div class="row justify-content-center">
                    <div class="col">
                      <h1 class="mb-5">FAQ</h1>
                    </div>
                  </div>
                </div>
              </section>
              hero -->


                  <!-- accordions -->
    <!-- <section class="pb-0">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col">
            <div class="accordion accordion-fluid" id="accordion-1">
              <div class="card">
                <div class="card-header" id="heading-1-1">
                  <h5 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-1-1" aria-expanded="false" aria-controls="collapse-1-1">
                      Transfer my domain to another registrar
                    </button>
                  </h5>
                </div>
            </div>
            </div>
        </div>
    </section> -->




    <!-- <div>jfkdlsjaflkdsja</div> -->

    <!--
        DOESN'T WORK, needs figure-out 
        div vg-if="comp.Router.PathChecksFailed()">
        Sorry, the page you requested was not found.
    </div -->

    <!-- footer -->
    <footer class="bg-dark">
      <div class="container">
        <div class="row gutter-3">
          <div class="col-12 col-md-2">
            <a href=""><img src="/assets/images/logo-white.svg" alt="Logo"/></a>
          </div>

          <div class="col-12 col-md-6 text-white collapse">
            <p class="mb-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <div class="row">
              <div class="col">
                <ul class="list-group list-group-minimal">
                  <li class="list-group-item"><a href="" class="link">Product Help</a></li>
                  <li class="list-group-item"><a href="" class="link">Training Videos</a></li>
                  <li class="list-group-item"><a href="" class="link">Integrations</a></li>
                </ul>
              </div>
              <div class="col">
                <ul class="list-group list-group-minimal">
                  <li class="list-group-item"><a href="" class="link">REST API</a></li>
                  <li class="list-group-item"><a href="" class="link">Corporate</a></li>
                </ul>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-4 col-lg-2 ml-auto text-md-right">

            Copyright (C) 2019

            <div class="dropdown collapse">
              <button class="btn btn-inverted btn-block dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                English
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">French</a>
                <a class="dropdown-item" href="#">German</a>
              </div>
            </div>

          </div>
        </div>
      </div>
    </footer>
    <!-- / footer -->




</div>
</div>
<script>
var wasmSupported = (typeof WebAssembly === "object");
if (wasmSupported) {
	if (!WebAssembly.instantiateStreaming) { 
		WebAssembly.instantiateStreaming = async (resp, importObject) => {
			const source = await (await resp).arrayBuffer();
			return await WebAssembly.instantiate(source, importObject);
		};
	}
	const go = new Go();
	WebAssembly.instantiateStreaming(fetch("/main.wasm"), go.importObject).then((result) => {
		go.run(result.instance);
	});
} else {
	
	console.log("Full functionality requires WebAssembly support.  Please upgrade your browser.")
}
</script>
</body>
</html>
